// room script file

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// IMPORTANTE EN ESTE SCRIPT CMEI SE LLAMA CSATSUKI,  por el cambio de personaje que en realidad se cambia view//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function room_Load()
{
  cSatsuki.Scaling = 90;
  oBellota.Scaling = 60;
  oBellota2.Scaling = 70;
  oBellota3.Scaling = 70;
  oBellota4.Scaling = 70;
}

function oBellota_Interact(Object *theObject, CursorMode mode)
{
  // Decir dialogo
  cSatsuki.Walk(oBellota.X, oBellota.Y, eBlock, eWalkableAreas);
  imgDialogo.BackgroundGraphic = 150;
  mostrarDialogo("Hmm… ¿Qué hace una BELLOTA aquí?");
  oBellota.Visible = false;
  
  // Se añade al inventario
  cSatsuki.AddInventory(iBellota);

  // Se muestra la siguiente bellota
  oBellota2.Visible = true;
  
  imgDialogo.BackgroundGraphic = 150;
  mostrarDialogo("¿Eh? Parece que hay más… quizá debería ver a dónde llevan.");
}

function oBellota2_Interact(Object *theObject, CursorMode mode)
{
  cSatsuki.Walk(oBellota2.X, oBellota2.Y, eBlock, eWalkableAreas);
  oBellota2.Visible = false;
  
  oBellota3.Visible = true;
  
  // Se añade al inventario
  cSatsuki.AddInventory(iBellota);

}

function oBellota4_Interact(Object *theObject, CursorMode mode)
{
  // Se oculta la bellota
  cSatsuki.Walk(oBellota4.X, oBellota4.Y, eBlock, eWalkableAreas);
  cSatsuki.AddInventory(iBellota);
  oBellota4.Visible = false;
  
  // Las bellotas se hacen grupo de bellotas al tener 4
    // Quita las bellotas del inventario
    cSatsuki.LoseInventory(iBellota);
    cSatsuki.LoseInventory(iBellota);
    cSatsuki.LoseInventory(iBellota);
    cSatsuki.LoseInventory(iBellota);
    
    // Se añade el GrupoBellotas al inventario
    cSatsuki.AddInventory(iGrupoBellotas);
    
  //Decir dialogo
  imgDialogo.BackgroundGraphic = 150;
  mostrarDialogo("Estas bellotas están por todas partes. Seguro que alguien las ha dejado aquí…");
  
  //Aparecen los totoros
  ctotoroAzul.Walk(585, 348, eNoBlock, eAnywhere);
  ctotoroBlanco.Walk(575, 364, eBlock, eAnywhere);
  Wait(120);
  
  imgDialogo.BackgroundGraphic = 150;
  mostrarDialogo("¡Anda! ¡Así que erais vosotros! ¡Sois los bichitos de los que hablaba la abuela! Os habéis escondido muy bien…");

  imgDialogo.BackgroundGraphic = 149;
  mostrarDialogo("¡Mei, cariño! ¡La comida está lista!");
  
  imgDialogo.BackgroundGraphic = 150;
  mostrarDialogo("¡Ya voy!");
  
  mostrarDialogo("Tengo que volver a casa… luego seguiré explorando. ¡Cuando le diga a Satsuki que he visto a los bichitos se va a quedar alucinada!");

  // Para iniciar correctamente la room 1 de nuevo 
  
}

function hVolver_AnyClick(Hotspot *theHotspot, CursorMode mode)
{
  // Cambia de room
  room2Completado = true;
  cSatsuki.Walk(7, 339, eBlock, eWalkableAreas);
  player.ChangeRoom(1, 617, 332, eDirectionLeft);
  
  
  //player.ChangeRoom(3, -100, 348, eDirectionRight);
  //cMei.ChangeRoom(3, -100, 360, eDirectionRight);
}

function hFlores_AnyClick(Hotspot *theHotspot, CursorMode mode)
{
  cSatsuki.Walk(296, 325, eBlock, eWalkableAreas);
  imgDialogo.BackgroundGraphic = 150;
  mostrarDialogo("¡Qué flor más bonita! Estas son las flores favoritas de mamá.");
}

function hFlores2_Interact(Hotspot *theHotspot, CursorMode mode)
{
  cSatsuki.Walk(537, 320, eBlock, eWalkableAreas);
  imgDialogo.BackgroundGraphic = 150;
  mostrarDialogo("¡Qué flor más bonita! Estas son las flores favoritas de mamá.");
}

function oBellota3_Interact(Object *theObject, CursorMode mode)
{
  cSatsuki.Walk(oBellota3.X, oBellota3.Y, eBlock, eWalkableAreas);
  oBellota3.Visible = false;
  cSatsuki.AddInventory(iBellota);
  oBellota4.Visible = true;

}


