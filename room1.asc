// room script file

function room_Load()
{
 cNanny.Scaling = 170;
 cSatsuki.Scaling = 150;
 cMei.Scaling = 140;
 
 // Vuelta a la room 1
 
 // Poner franjas
  oFranjaSuperiorRoom1.Move(0, 40, 1, eNoBlock, eAnywhere);
  oFranjaInferiorRoom1.Move(0, 440, 1, eNoBlock, eAnywhere);
  /*
  imgDialogo.BackgroundGraphic = 148;// Satsuki
  
  mostrarDialogo("¡Ya llegué! Qué hambre tengo… ");
  mostrarDialogo("¡Hola Mei!");
  
  imgDialogo.BackgroundGraphic = 150; //Mei
  mostrarDialogo("¡Satsuki no vas a creer lo que he visto! He salido al jardín a explorar mientras papá trabajaba.");
  mostrarDialogo("He encontrado a unos Totoros pequeñitos, como los del cuento de la abuela.");
  
  
  // Se sienta al lado de Mei
  cSatsuki.Walk(253, 304, eBlock, eWalkableAreas);
  cSatsuki.Walk(82, 315, eBlock, eWalkableAreas);
  
  imgDialogo.BackgroundGraphic = 148;
  mostrarDialogo("¿Unos Totoros pequeños? ¿Cómo los has encontrado?");
  
  imgDialogo.BackgroundGraphic = 150; //Mei
  mostrarDialogo("He seguido un rastro de bellotas.");
  
  imgDialogo.BackgroundGraphic = 148;
  mostrarDialogo("No puedo creer que me los haya perdido. Prométeme que la próxima vez que los encuentres me llevarás contigo.");
  
  imgDialogo.BackgroundGraphic = 150; //Mei
  mostrarDialogo("No estés triste Satsuki. Te prometo que la próxima vez los verás tú también.");
  
  // Se quitan las franjas
  oFranjaSuperiorRoom1.Move(0, 0, 1, eNoBlock, eAnywhere);
  oFranjaInferiorRoom1.Move(0, 475, 1, eNoBlock, eAnywhere);
  */
}

function hCambiarRoom_WalkOn(Hotspot *theHotspot)
{
  player.ChangeRoom(2, 23, 351, eDirectionRight);
}

function room_FirstLoad()
{
  StartCutscene(eSkipESCOnly); // Esto es para saltar toda la cinematica con el Esc,  cuando acabemos el juego lo eliminamos
  
  // Se ponen las franjas
  oFranjaSuperiorRoom1.Move(0, 40, 1, eNoBlock, eAnywhere);
  oFranjaInferiorRoom1.Move(0, 440, 1, eNoBlock, eAnywhere);
  Wait(80);
  
  //Se acercan las dos niñas
  cSatsuki.Walk(20, 355, eNoBlock, eAnywhere);
  cMei.Walk(13, 309, eBlock, eAnywhere);
  
  cMei.FaceDirection(eDirectionRight);
  cSatsuki.FaceDirection(eDirectionRight);
  
  imgDialogo.BackgroundGraphic = 148; // Satsuki
  mostrarDialogo("¡Nanny! ¡Nos hemos encontrado con unos bichitos negros en el desvan! ¿Nos cuentas algo sobre los animalitos magicos que viven en esta casa?");

  imgDialogo.BackgroundGraphic = 149; // Nanny
  mostrarDialogo("Claro niñas. Sentaos aquí a mi lado. Según dicen las leyendas, en las casas abandonadas viven los conejos de polvo porque les gustan los sitios tristes. Sin embargo, ahora que os habéis mudado aquí, están saliendo porque sois unas niñas muy felices.");
  
  // Se sientan las niñas
  cSatsuki.ChangeView(6);
  cMei.Walk(100, 330, eBlock, eWalkableAreas);
  cMei.ChangeView(11);
  Wait(30);
  
  // Comienza el dialogo
  dialogoRoom1();
  
  // Se quitan las franjas
  oFranjaSuperiorRoom1.Move(0, 0, 1, eNoBlock, eAnywhere);
  oFranjaInferiorRoom1.Move(0, 475, 1, eNoBlock, eAnywhere);
  
  // NavMesh, Satsuki se sale de la escena
  cSatsuki.Walk(30, 304, eBlock, eWalkableAreas);
  cSatsuki.Walk(246, 304, eBlock, eWalkableAreas);
  cSatsuki.Walk(623, 327, eBlock, eWalkableAreas);
  
  EndCutscene();
}