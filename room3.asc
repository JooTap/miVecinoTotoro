// room script file

function room_AfterFadeIn()
{
  //Se bajan las franjas
  oFranjaSuperiorRoom3.Move(0, 40, 1, eNoBlock, eAnywhere);
  oFranjaInferiorRoom3.Move(0, 440, 1, eBlock, eAnywhere);
  
  cMei.ChangeView(12);
  cSatsuki.ChangeView(8);
 
  // Andan hasta un punto
  cMei.Walk(78, 351, eNoBlock, eAnywhere);
  cSatsuki.Walk(67, 320, eBlock, eAnywhere);
  
  cMei.FaceDirection(eDirectionUp);
  cSatsuki.FaceDirection(eDirectionDown);
  
  //Dicen el primer dialogo
  dialogoRoom3();
  
  cMei.Walk(164, 327, eNoBlock, eAnywhere);
  cMei.FaceDirection(eDirectionDown);
  
  // Se quitan las franjas
  oFranjaSuperiorRoom3.Move(0, 0, 1, eNoBlock, eAnywhere);
  oFranjaInferiorRoom3.Move(0, 475, 1, eNoBlock, eAnywhere);
}

function oPiedra_Interact(Object *theObject, CursorMode mode)
{
  cSatsuki.Walk(oPiedra.X,  oPiedra.Y,  eBlock);
  oPiedra.Visible = false;
  cSatsuki.AddInventory(iPiedra);
  
  // Diálogo interactuar piedra
  imgDialogo.Visible = true;
  imgDialogo.BackgroundGraphic = 148;
  mostrarDialogo("Con esta piedra puedo llegar a sitios(Dialogo provisional)");
  imgDialogo.Visible = false;
  gDialogos.Visible = false;
  
}

function oPiedra_Look(Object *theObject, CursorMode mode)
{
 // Diálogo mirar piedra
  imgDialogo.Visible = true;
  imgDialogo.BackgroundGraphic = 148;
  mostrarDialogo("Igual puedo usar aquella piedra(Dialogo provisional)");
  imgDialogo.Visible = false;
  gDialogos.Visible = false;
  
}


function oHojaArbol_UseInv(Object *theObject, CursorMode mode)
{
  if (player.ActiveInventory == iPiedra) {
  player.LoseInventory(iPiedra);
  oHojaArbol.Move(216,  322,  3,  eBlock,  eAnywhere);
  gHojaDown = 1;
  
  //Diálogo hoja
  imgDialogo.Visible = true;
  imgDialogo.BackgroundGraphic = 148;
  mostrarDialogo("Bingo! (Dialogo provisional)");
  imgDialogo.Visible = false;
  gDialogos.Visible = false;
  
  }
}

function oPlantaSuelo_Interact(Object *theObject, CursorMode mode)
{
  // Diálogo interactuar hoja pequeña
  cSatsuki.AddInventory(iHojaPequena);
  
  imgDialogo.Visible = true;
  imgDialogo.BackgroundGraphic = 148;
  mostrarDialogo("Esto me puede venir bien (Dialogo provisional)");
  imgDialogo.Visible = false;
  gDialogos.Visible = false;
}

function oPlantaSuelo_Look(Object *theObject, CursorMode mode)
{
  // Diálogo interactuar con hoja pequeña
  imgDialogo.Visible = true;
  imgDialogo.BackgroundGraphic = 148;
  mostrarDialogo("Voy a acercarme a verla mejor (Dialogo provisional)");
  imgDialogo.Visible = false;
  gDialogos.Visible = false;
  
}

function oHojaArbol_Interact(Object *theObject, CursorMode mode)
{
  if (gHojaDown == 0){
    // Meter un diálogo de que no alcanza la hoja grande o algo
    
  imgDialogo.Visible = true;
  imgDialogo.BackgroundGraphic = 148;
  mostrarDialogo("No llego... Necesitare algo de ayuda(Dialogo provisional)");
  imgDialogo.Visible = false;
  gDialogos.Visible = false;
  }
  
  if (gHojaDown == 1){
      cSatsuki.Walk(oHojaArbol.X,  oHojaArbol.Y,  eBlock);
      cSatsuki.FaceObject(oHojaArbol);
      oHojaArbol.Visible = false;
      cSatsuki.AddInventory(iHojaArbol);
      
      // Meter diálogo al coger la hoja
      imgDialogo.Visible = true;
      imgDialogo.BackgroundGraphic = 148;
      mostrarDialogo("Lo consegui! Ahora Totoro no se mojará (Dialogo provisional)");
      imgDialogo.Visible = false;
      gDialogos.Visible = false;
    }
}
